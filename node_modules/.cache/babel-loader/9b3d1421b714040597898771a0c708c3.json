{"ast":null,"code":"var _jsxFileName = \"/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Alert, Spin } from \"antd\"; // Input, Button\n\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\"\n  }\n};\n\nfunction NFTBalance() {\n  _s();\n\n  const {\n    NFTBalance,\n    fetchSuccess\n  } = useNFTBalance();\n  const {\n    chainId\n  } = useMoralisDapp();\n  const [visible, setVisibility] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const Web3Api = useMoralisWeb3Api();\n  const downloadProcessor = useWeb3ExecuteFunction();\n  const [loading, setLoading] = useState(false);\n\n  async function fetchNFTMetadata(nft) {\n    setLoading(true);\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options);\n    const metadata = JSON.parse(metaData.metadata);\n    const attributes = metadata.attributes;\n    const response = [];\n\n    for (let i = 0; i < attributes.length; i++) {\n      try {\n        let hash = '';\n        let name = '';\n        name = attributes[i].value;\n        hash = attributes[i].file;\n        let ipfsHash = hash.replace(\"ipfs://\", \"\");\n        const url = `https://ipfs.moralis.io:2053/ipfs/${ipfsHash}`;\n        const response = await fetch(url).then(r => r.blob());\n\n        var fileDownload = require('js-file-download');\n\n        fileDownload(response, name + \".stl\");\n      } catch (e) {\n        break;\n      }\n    }\n\n    await downloadProcessor.fetch({\n      params: response,\n      onSuccess: () => {\n        console.log('success');\n        setLoading(false);\n        setVisibility(false);\n        succDownload();\n      },\n      onError: error => {\n        console.log('fail');\n        setLoading(false);\n        failDownload();\n      }\n    });\n  }\n\n  function succDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `Files succesfully downloaded`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  function failDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `No files found!`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  const handleDownloadFileClick = nft => {\n    setNftToGrabFiles(nft);\n    setVisibility(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.NFTs,\n      children: [!fetchSuccess && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Alert, {\n          message: \"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\",\n          type: \"warning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), NFTBalance && NFTBalance.map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n        hoverable: true,\n        actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"View Token on Block Explorer\",\n          children: /*#__PURE__*/_jsxDEV(FileSearchOutlined, {\n            onClick: () => window.open(`${getExplorer(chainId)}token/${nft.token_address}`, \"_blank\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Download Files, if available\",\n          children: /*#__PURE__*/_jsxDEV(DownloadOutlined, {\n            onClick: () => handleDownloadFileClick(nft)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)],\n        style: {\n          width: 240,\n          border: \"2px solid #e7eaf3\"\n        },\n        cover: /*#__PURE__*/_jsxDEV(Image, {\n          preview: false,\n          src: (nft === null || nft === void 0 ? void 0 : nft.image) || \"error\",\n          fallback: \"data:image/png;base64,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\",\n          alt: \"\",\n          style: {\n            height: \"240px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Meta, {\n          title: nft.name,\n          description: nft.contract_type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: `Download ${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.name} #${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.token_id} Files`,\n      visible: visible,\n      okText: \"Download Files\",\n      onOk: () => fetchNFTMetadata(nftToGrabFiles),\n      onCancel: () => setVisibility(false),\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click Download Files to download the 3d printer files, if available!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Spin, {\n        spinning: loading,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"NFT\",\n          src: `${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.image}`,\n          style: {\n            width: \"250px\",\n            margin: \"auto\",\n            borderRadius: \"10px\",\n            marginTop: \"15px\",\n            marginBottom: \"15px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(NFTBalance, \"+/w6JNScu7bANd20RXP1HGycyrY=\", false, function () {\n  return [useNFTBalance, useMoralisDapp, useMoralisWeb3Api, useWeb3ExecuteFunction];\n});\n\n_c = NFTBalance;\nexport default NFTBalance;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFTBalance\");","map":{"version":3,"sources":["/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx"],"names":["React","useState","useMoralisWeb3Api","Card","Image","Tooltip","Modal","Alert","Spin","useNFTBalance","FileSearchOutlined","DownloadOutlined","useMoralisDapp","getExplorer","useWeb3ExecuteFunction","Meta","styles","NFTs","display","flexWrap","WebkitBoxPack","justifyContent","margin","maxWidth","gap","NFTBalance","fetchSuccess","chainId","visible","setVisibility","nftToGrabFiles","setNftToGrabFiles","Web3Api","downloadProcessor","loading","setLoading","fetchNFTMetadata","nft","options","chain","address","token_address","token_id","metaData","token","getTokenIdMetadata","metadata","JSON","parse","attributes","response","i","length","hash","name","value","file","ipfsHash","replace","url","fetch","then","r","blob","fileDownload","require","e","params","onSuccess","console","log","succDownload","onError","error","failDownload","secondsToGo","modal","success","title","content","setTimeout","destroy","handleDownloadFileClick","marginBottom","map","index","window","open","width","border","image","height","contract_type","borderRadius","marginTop"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Alert, Spin } from \"antd\"; // Input, Button\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\n\nconst { Meta } = Card;\n\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\",\n  },\n};\n\nfunction NFTBalance() {\n  const { NFTBalance, fetchSuccess } = useNFTBalance();\n  const { chainId } = useMoralisDapp();\n  const [visible, setVisibility] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const Web3Api = useMoralisWeb3Api();\n  const downloadProcessor = useWeb3ExecuteFunction();\n  const [loading, setLoading] = useState(false);\n\n  async function fetchNFTMetadata(nft) {\n    setLoading(true);\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options)\n    const metadata = JSON.parse(metaData.metadata);    \n    const attributes = metadata.attributes\n    const response = [];\n   \n    for (let i = 0; i < attributes.length; i++) {\n      try {\n        let hash = '';\n        let name = '';\n        name = attributes[i].value\n        hash = attributes[i].file\n        let ipfsHash = hash.replace(\"ipfs://\", \"\")\n        const url = `https://ipfs.moralis.io:2053/ipfs/${ipfsHash}`\n        const response = await fetch(url).then(r => r.blob())\n        var fileDownload = require('js-file-download');\n        fileDownload(response, name + \".stl\")\n      } catch (e) {\n        break;\n      }\n    }\n\n    await downloadProcessor.fetch({\n      params: response,\n      onSuccess: () => {\n        console.log('success');\n        setLoading(false);\n        setVisibility(false);\n        succDownload();\n      },\n      onError: (error) => {\n        console.log('fail')\n        setLoading(false);\n        failDownload();\n      }\n    })\n  }\n\n  function succDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `Files succesfully downloaded`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  function failDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `No files found!`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  const handleDownloadFileClick = (nft) => {\n    setNftToGrabFiles(nft);\n    setVisibility(true);\n  }\n\n  return (\n    <>\n      <div style={styles.NFTs}>\n        {!fetchSuccess && (\n          <>\n            <Alert\n              message=\"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\"\n              type=\"warning\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )} \n        {NFTBalance &&\n          NFTBalance.map((nft, index) => (\n            <Card\n              hoverable\n              actions={[\n                <Tooltip title=\"View Token on Block Explorer\">\n                  <FileSearchOutlined\n                    onClick={() =>\n                      window.open(\n                        `${getExplorer(chainId)}token/${nft.token_address}`,\n                        \"_blank\"\n                      )\n                    }\n                  />\n                </Tooltip>,\n                <Tooltip title=\"Download Files, if available\">\n                  <DownloadOutlined onClick={() => handleDownloadFileClick(nft)} />\n                </Tooltip>,\n              ]}\n              style={{ width: 240, border: \"2px solid #e7eaf3\" }}\n              cover={\n                <Image\n                  preview={false}\n                  src={nft?.image || \"error\"}\n                  fallback=\"data:image/png;base64,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\"\n                  alt=\"\"\n                  style={{ height: \"240px\" }}\n                />\n              }\n              key={index}\n            >\n              <Meta title={nft.name} description={nft.contract_type}/>\n            </Card>\n          ))}\n      </div>\n        <Modal\n          title={`Download ${nftToGrabFiles?.name} #${nftToGrabFiles?.token_id} Files`}\n          visible={visible}\n          okText=\"Download Files\"\n          onOk={() => fetchNFTMetadata(nftToGrabFiles)}\n          onCancel={() => setVisibility(false)}\n        >\n          <p>Click Download Files to download the 3d printer files, if available!</p>\n            <Spin spinning={loading}>\n            <img alt=\"NFT\"\n              src={`${nftToGrabFiles?.image}`}\n              style={{\n                width: \"250px\",\n                margin: \"auto\",\n                borderRadius: \"10px\",\n                marginTop: \"15px\",\n                marginBottom: \"15px\",\n              }}\n            />\n            </Spin>\n        </Modal>\n    </>\n  );\n}\n\nexport default NFTBalance;\n"]},"metadata":{},"sourceType":"module"}