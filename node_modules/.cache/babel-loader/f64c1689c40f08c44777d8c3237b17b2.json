{"ast":null,"code":"var _jsxFileName = \"/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useMoralis, useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Input, Alert, Spin, Button } from \"antd\";\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\"\n  }\n};\n\nfunction NFTBalance() {\n  _s();\n\n  const {\n    NFTBalance,\n    fetchSuccess\n  } = useNFTBalance();\n  const {\n    chainId\n  } = useMoralisDapp();\n  const {\n    Moralis\n  } = useMoralis();\n  const [visible, setVisibility] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const ItemImage = Moralis.Object.extend(\"ItemImages\");\n  const Web3Api = useMoralisWeb3Api();\n\n  async function fetchNFTMetadata(nft) {\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options);\n    const metadata = JSON.parse(metaData.metadata);\n    let attributes = metadata.attributes;\n    console.log(attributes);\n  }\n\n  async function downloadFile(nft) {\n    setLoading(true);\n    const ops = {\n      params: {\n        nftContract: nft.token_address,\n        tokenId: nft.token_id\n      }\n    };\n    await contractProcessor.fetch({\n      params: ops,\n      onSuccess: () => {\n        console.log(\"success\");\n        setLoading(false);\n        setVisibility(false);\n        addItemImage();\n        succDownload();\n      },\n      onError: error => {\n        setLoading(false);\n        failDownload();\n      }\n    });\n  } // async function approveAll(nft) {\n  //   setLoading(true);  \n  //   const ops = {\n  //     contractAddress: nft.token_address,\n  //     functionName: \"setApprovalForAll\",\n  //     abi: [{\"inputs\":[{\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\n  //     params: {\n  //       operator: marketAddress,\n  //       approved: true\n  //     },\n  //   };\n  //   await contractProcessor.fetch({\n  //     params: ops,\n  //     onSuccess: () => {\n  //       console.log(\"Approval Received\");\n  //       setLoading(false);\n  //       setVisibility(false);\n  //       succApprove();\n  //     },\n  //     onError: (error) => {\n  //       setLoading(false);\n  //       failApprove();\n  //     },\n  //   });\n  // }\n  // const handleSellClick = (nft) => {\n  //   setNftToSend(nft);\n  //   setVisibility(true);\n  // };\n\n\n  const handleDownloadFileClick = nft => {\n    addItemImage(nft);\n    setNftToGrabFiles(nft);\n    fetchNFTMetadata(nft);\n    setVisibility(true);\n  };\n\n  function succDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `Your NFT was listed on the marketplace`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  } // function succApprove() {\n  //   let secondsToGo = 5;\n  //   const modal = Modal.success({\n  //     title: \"Success!\",\n  //     content: `Approval is now set, you may list your NFT`,\n  //   });\n  //   setTimeout(() => {\n  //     modal.destroy();\n  //   }, secondsToGo * 1000);\n  // }\n\n\n  function failDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `There was a problem listing your NFT`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  } // function failApprove() {\n  //   let secondsToGo = 5;\n  //   const modal = Modal.error({\n  //     title: \"Error!\",\n  //     content: `There was a problem with setting approval`,\n  //   });\n  //   setTimeout(() => {\n  //     modal.destroy();\n  //   }, secondsToGo * 1000);\n  // }\n\n\n  function addItemImage() {\n    const itemImage = new ItemImage();\n    itemImage.set(\"image\", nftToGrabFiles.image);\n    itemImage.set(\"nftContract\", nftToGrabFiles.token_address);\n    itemImage.set(\"tokenId\", nftToGrabFiles.token_id);\n    itemImage.set(\"name\", nftToGrabFiles.name);\n    itemImage.save();\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.NFTs,\n      children: NFTBalance && NFTBalance.map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n        hoverable: true,\n        actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"View On Blockexplorer\",\n          children: /*#__PURE__*/_jsxDEV(FileSearchOutlined, {\n            onClick: () => window.open(`${getExplorer(chainId)}token/${nft.token_address}?a=${nft.token_id}#inventory`, \"_blank\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Download File\",\n          children: /*#__PURE__*/_jsxDEV(DownloadOutlined, {\n            onClick: () => handleDownloadFileClick(nft)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }, this)],\n        style: {\n          width: 240,\n          border: \"2px solid #e7eaf3\"\n        },\n        cover: /*#__PURE__*/_jsxDEV(Image, {\n          preview: false,\n          src: (nft === null || nft === void 0 ? void 0 : nft.image) || \"error\",\n          fallback: \"data:image/png;base64,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\",\n          alt: \"\",\n          style: {\n            height: \"240px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Meta, {\n          title: nft.name,\n          description: nft.contract_type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: `Download ${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.name} #${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.token_id} Files`,\n      visible: visible,\n      onOk: () => downloadFile(nftToGrabFiles),\n      onCancel: () => setVisibility(false) // footer={[\n      //   <Button onClick={() => setVisibility(false)}>\n      //     Cancel\n      //   </Button>,\n      //   <Button onClick={() => approveAll(nftToSend)} type=\"primary\">\n      //     Approve\n      //   </Button>,\n      //   <Button onClick={() => list(nftToSend, price)} type=\"primary\">\n      //     List\n      //   </Button>\n      // ]}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(NFTBalance, \"qfBS+MyoGHcRFdcjrt0dkOxelAc=\", false, function () {\n  return [useNFTBalance, useMoralisDapp, useMoralis, useWeb3ExecuteFunction, useMoralisWeb3Api];\n});\n\n_c = NFTBalance;\nexport default NFTBalance;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFTBalance\");","map":{"version":3,"sources":["/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx"],"names":["React","useState","useMoralis","useMoralisWeb3Api","Card","Image","Tooltip","Modal","Input","Alert","Spin","Button","useNFTBalance","FileSearchOutlined","DownloadOutlined","useMoralisDapp","getExplorer","useWeb3ExecuteFunction","Meta","styles","NFTs","display","flexWrap","WebkitBoxPack","justifyContent","margin","maxWidth","gap","NFTBalance","fetchSuccess","chainId","Moralis","visible","setVisibility","loading","setLoading","nftToGrabFiles","setNftToGrabFiles","contractProcessor","ItemImage","Object","extend","Web3Api","fetchNFTMetadata","nft","options","chain","address","token_address","token_id","metaData","token","getTokenIdMetadata","metadata","JSON","parse","attributes","console","log","downloadFile","ops","params","nftContract","tokenId","fetch","onSuccess","addItemImage","succDownload","onError","error","failDownload","handleDownloadFileClick","secondsToGo","modal","success","title","content","setTimeout","destroy","itemImage","set","image","name","save","map","index","window","open","width","border","height","contract_type"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useMoralis, useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Input, Alert, Spin, Button } from \"antd\";\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nconst { Meta } = Card;\n\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\",\n  },\n};\n\nfunction NFTBalance() {\n  const { NFTBalance, fetchSuccess } = useNFTBalance();\n  const { chainId } = useMoralisDapp();\n  const { Moralis } = useMoralis();\n  const [visible, setVisibility] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const ItemImage = Moralis.Object.extend(\"ItemImages\");\n  const Web3Api = useMoralisWeb3Api();\n\n  async function fetchNFTMetadata(nft) {\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options)\n    const metadata = JSON.parse(metaData.metadata);\n    let attributes = metadata.attributes\n    console.log(attributes)\n  }\n\n  async function downloadFile(nft) {\n    setLoading(true);\n    const ops = {\n      params: {\n        nftContract: nft.token_address,\n        tokenId: nft.token_id,\n      },\n    };\n\n    await contractProcessor.fetch({\n      params: ops,\n      onSuccess: () => {\n        console.log(\"success\");\n        setLoading(false);\n        setVisibility(false);\n        addItemImage();\n        succDownload();\n      },\n      onError: (error) => {\n        setLoading(false);\n        failDownload();\n      },\n    });\n  }\n\n\n  // async function approveAll(nft) {\n  //   setLoading(true);  \n  //   const ops = {\n  //     contractAddress: nft.token_address,\n  //     functionName: \"setApprovalForAll\",\n  //     abi: [{\"inputs\":[{\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\n  //     params: {\n  //       operator: marketAddress,\n  //       approved: true\n  //     },\n  //   };\n\n  //   await contractProcessor.fetch({\n  //     params: ops,\n  //     onSuccess: () => {\n  //       console.log(\"Approval Received\");\n  //       setLoading(false);\n  //       setVisibility(false);\n  //       succApprove();\n  //     },\n  //     onError: (error) => {\n  //       setLoading(false);\n  //       failApprove();\n  //     },\n  //   });\n  // }\n\n  // const handleSellClick = (nft) => {\n  //   setNftToSend(nft);\n  //   setVisibility(true);\n  // };\n\n  const handleDownloadFileClick = (nft) => {\n    addItemImage(nft);\n    setNftToGrabFiles(nft);\n    fetchNFTMetadata(nft);\n    setVisibility(true);\n  }\n\n  function succDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `Your NFT was listed on the marketplace`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  // function succApprove() {\n  //   let secondsToGo = 5;\n  //   const modal = Modal.success({\n  //     title: \"Success!\",\n  //     content: `Approval is now set, you may list your NFT`,\n  //   });\n  //   setTimeout(() => {\n  //     modal.destroy();\n  //   }, secondsToGo * 1000);\n  // }\n\n  function failDownload() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `There was a problem listing your NFT`,\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  // function failApprove() {\n  //   let secondsToGo = 5;\n  //   const modal = Modal.error({\n  //     title: \"Error!\",\n  //     content: `There was a problem with setting approval`,\n  //   });\n  //   setTimeout(() => {\n  //     modal.destroy();\n  //   }, secondsToGo * 1000);\n  // }\n\n  function addItemImage() {\n    const itemImage = new ItemImage();\n\n    itemImage.set(\"image\", nftToGrabFiles.image);\n    itemImage.set(\"nftContract\", nftToGrabFiles.token_address);\n    itemImage.set(\"tokenId\", nftToGrabFiles.token_id);\n    itemImage.set(\"name\", nftToGrabFiles.name);\n\n    itemImage.save();\n  }\n\n  return (\n    <>\n      <div style={styles.NFTs}>\n        {/* {contractABIJson.noContractDeployed && (\n          <>\n            <Alert\n              message=\"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\"\n              type=\"error\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )}\n        {!fetchSuccess && (\n          <>\n            <Alert\n              message=\"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\"\n              type=\"warning\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )} */}\n        {NFTBalance &&\n          NFTBalance.map((nft, index) => (\n            <Card\n              hoverable\n              actions={[\n                <Tooltip title=\"View On Blockexplorer\">\n                  <FileSearchOutlined\n                    onClick={() =>\n                      window.open(\n                        `${getExplorer(chainId)}token/${nft.token_address}?a=${nft.token_id}#inventory`,\n                        \"_blank\"\n                      )\n                    }\n                  />\n                </Tooltip>,\n                <Tooltip title=\"Download File\">\n                  <DownloadOutlined onClick={() => handleDownloadFileClick(nft)} />\n                </Tooltip>,\n              ]}\n              style={{ width: 240, border: \"2px solid #e7eaf3\" }}\n              cover={\n                <Image\n                  preview={false}\n                  src={nft?.image || \"error\"}\n                  fallback=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==\"\n                  alt=\"\"\n                  style={{ height: \"240px\" }}\n                />\n              }\n              key={index}\n            >\n              <Meta title={nft.name} description={nft.contract_type}/>\n            </Card>\n          ))}\n      </div>\n        <Modal\n          title={`Download ${nftToGrabFiles?.name} #${nftToGrabFiles?.token_id} Files`}\n          visible={visible}\n          onOk={() => downloadFile(nftToGrabFiles)}\n          onCancel={() => setVisibility(false)}\n          // footer={[\n          //   <Button onClick={() => setVisibility(false)}>\n          //     Cancel\n          //   </Button>,\n          //   <Button onClick={() => approveAll(nftToSend)} type=\"primary\">\n          //     Approve\n          //   </Button>,\n          //   <Button onClick={() => list(nftToSend, price)} type=\"primary\">\n          //     List\n          //   </Button>\n          // ]}\n        >\n        </Modal>\n    </>\n  );\n}\n\nexport default NFTBalance;\n"]},"metadata":{},"sourceType":"module"}