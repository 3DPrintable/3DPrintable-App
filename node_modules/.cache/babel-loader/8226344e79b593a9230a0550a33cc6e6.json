{"ast":null,"code":"var _jsxFileName = \"/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Input, Alert, Spin, Button } from \"antd\";\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { download } from \"downloadjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\"\n  }\n};\n\nfunction NFTBalance() {\n  _s();\n\n  const {\n    NFTBalance,\n    fetchSuccess\n  } = useNFTBalance();\n  const {\n    chainId\n  } = useMoralisDapp();\n  const [visible, setVisibility] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const Web3Api = useMoralisWeb3Api();\n\n  async function fetchNFTMetadata(nft) {\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options);\n    const metadata = JSON.parse(metaData.metadata);\n    const attributes = metadata.attributes; // console.log(metadata)\n\n    let files;\n\n    for (let i = 0; i < attributes.length - 1; i++) {\n      let hash = '';\n      let name = '';\n      name = attributes[i].value;\n      hash = attributes[i].file;\n      let ipfsHash = hash.replace(\"ipfs://\", \"\");\n      const url = `https://ipfs.moralis.io:2053/ipfs/${ipfsHash}`;\n\n      function onStartedDownload(id) {\n        console.log(`Started downloading: ${id}`);\n      }\n\n      function onFailed(error) {\n        console.log(`Download failed: ${error}`);\n      }\n\n      var downloadUrl = url;\n      var downloading = download({\n        url: downloadUrl,\n        filename: name,\n        conflictAction: 'uniquify'\n      });\n      downloading.then(onStartedDownload, onFailed); // const response = await fetch(url)\n      // console.log(name)\n      // console.log(response)\n      // files.push(response)\n      // async function fetchIPFSFile(hash) {\n      //   const url = hash;\n      //   const response = await fetch(url);\n      //   return await response.json();\n      // }\n    }\n\n    console.log(files);\n  }\n\n  const handleDownloadFileClick = nft => {\n    setNftToGrabFiles(nft);\n    setVisibility(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.NFTs,\n      children: NFTBalance && NFTBalance.map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n        hoverable: true,\n        actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"View On Blockexplorer\",\n          children: /*#__PURE__*/_jsxDEV(FileSearchOutlined, {\n            onClick: () => window.open(`${getExplorer(chainId)}token/${nft.token_address}?a=${nft.token_id}#inventory`, \"_blank\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Download Files, if available\",\n          children: /*#__PURE__*/_jsxDEV(DownloadOutlined, {\n            onClick: () => handleDownloadFileClick(nft)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this)],\n        style: {\n          width: 240,\n          border: \"2px solid #e7eaf3\"\n        },\n        cover: /*#__PURE__*/_jsxDEV(Image, {\n          preview: false,\n          src: (nft === null || nft === void 0 ? void 0 : nft.image) || \"error\",\n          fallback: \"data:image/png;base64,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\",\n          alt: \"\",\n          style: {\n            height: \"240px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Meta, {\n          title: nft.name,\n          description: nft.contract_type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: `Download ${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.name} #${nftToGrabFiles === null || nftToGrabFiles === void 0 ? void 0 : nftToGrabFiles.token_id} Files`,\n      visible: visible,\n      onOk: () => fetchNFTMetadata(nftToGrabFiles),\n      onCancel: () => setVisibility(false),\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click OK to download the 3d printer files!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(NFTBalance, \"S0SCxf1hL22XU0Ej9395kNmuOI0=\", false, function () {\n  return [useNFTBalance, useMoralisDapp, useMoralisWeb3Api];\n});\n\n_c = NFTBalance;\nexport default NFTBalance;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFTBalance\");","map":{"version":3,"sources":["/Users/bryce_palichuk/Documents/GitHub/3DPrintable_Organization/3DPrintable-App/src/components/NFTBalance.jsx"],"names":["React","useState","useMoralisWeb3Api","Card","Image","Tooltip","Modal","Input","Alert","Spin","Button","useNFTBalance","FileSearchOutlined","DownloadOutlined","useMoralisDapp","getExplorer","download","Meta","styles","NFTs","display","flexWrap","WebkitBoxPack","justifyContent","margin","maxWidth","gap","NFTBalance","fetchSuccess","chainId","visible","setVisibility","nftToGrabFiles","setNftToGrabFiles","Web3Api","fetchNFTMetadata","nft","options","chain","address","token_address","token_id","metaData","token","getTokenIdMetadata","metadata","JSON","parse","attributes","files","i","length","hash","name","value","file","ipfsHash","replace","url","onStartedDownload","id","console","log","onFailed","error","downloadUrl","downloading","filename","conflictAction","then","handleDownloadFileClick","map","index","window","open","width","border","image","height","contract_type"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,iBAAT,QAAkC,eAAlC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,OAAtB,EAA+BC,KAA/B,EAAsCC,KAAtC,EAA6CC,KAA7C,EAAoDC,IAApD,EAA0DC,MAA1D,QAAwE,MAAxE;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,kBAAT,EAA6BC,gBAA7B,QAAqD,mBAArD;AACA,SAASC,cAAT,QAA+B,mDAA/B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,YAAzB;;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAWd,IAAjB;AAEA,MAAMe,MAAM,GAAG;AACbC,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE,MADL;AAEJC,IAAAA,QAAQ,EAAE,MAFN;AAGJC,IAAAA,aAAa,EAAE,OAHX;AAIJC,IAAAA,cAAc,EAAE,YAJZ;AAKJC,IAAAA,MAAM,EAAE,QALJ;AAMJC,IAAAA,QAAQ,EAAE,QANN;AAOJC,IAAAA,GAAG,EAAE;AAPD;AADO,CAAf;;AAYA,SAASC,UAAT,GAAsB;AAAA;;AACpB,QAAM;AAAEA,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA+BjB,aAAa,EAAlD;AACA,QAAM;AAAEkB,IAAAA;AAAF,MAAcf,cAAc,EAAlC;AACA,QAAM,CAACgB,OAAD,EAAUC,aAAV,IAA2B9B,QAAQ,CAAC,KAAD,CAAzC;AACA,QAAM,CAAC+B,cAAD,EAAiBC,iBAAjB,IAAsChC,QAAQ,CAAC,IAAD,CAApD;AACA,QAAMiC,OAAO,GAAGhC,iBAAiB,EAAjC;;AAEA,iBAAeiC,gBAAf,CAAgCC,GAAhC,EAAqC;AACnC,UAAMC,OAAO,GAAG;AACdC,MAAAA,KAAK,EAAET,OADO;AAEdU,MAAAA,OAAO,EAAEH,GAAG,CAACI,aAFC;AAGdC,MAAAA,QAAQ,EAAEL,GAAG,CAACK;AAHA,KAAhB;AAKA,UAAMC,QAAQ,GAAG,MAAMR,OAAO,CAACS,KAAR,CAAcC,kBAAd,CAAiCP,OAAjC,CAAvB;AACA,UAAMQ,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWL,QAAQ,CAACG,QAApB,CAAjB;AACA,UAAMG,UAAU,GAAGH,QAAQ,CAACG,UAA5B,CARmC,CASnC;;AAEA,QAAIC,KAAJ;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAIF,UAAU,CAACG,MAAX,GAAoB,CAAzC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,UAAIE,IAAI,GAAG,EAAX;AACA,UAAIC,IAAI,GAAG,EAAX;AACAA,MAAAA,IAAI,GAAGL,UAAU,CAACE,CAAD,CAAV,CAAcI,KAArB;AACAF,MAAAA,IAAI,GAAGJ,UAAU,CAACE,CAAD,CAAV,CAAcK,IAArB;AACA,UAAIC,QAAQ,GAAGJ,IAAI,CAACK,OAAL,CAAa,SAAb,EAAwB,EAAxB,CAAf;AACA,YAAMC,GAAG,GAAI,qCAAoCF,QAAS,EAA1D;;AAEA,eAASG,iBAAT,CAA2BC,EAA3B,EAA+B;AAC7BC,QAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBF,EAAG,EAAvC;AACD;;AAED,eAASG,QAAT,CAAkBC,KAAlB,EAAyB;AACvBH,QAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBE,KAAM,EAAtC;AACD;;AAED,UAAIC,WAAW,GAAGP,GAAlB;AAEA,UAAIQ,WAAW,GAAGlD,QAAQ,CAAC;AACzB0C,QAAAA,GAAG,EAAGO,WADmB;AAEzBE,QAAAA,QAAQ,EAAGd,IAFc;AAGzBe,QAAAA,cAAc,EAAG;AAHQ,OAAD,CAA1B;AAMAF,MAAAA,WAAW,CAACG,IAAZ,CAAiBV,iBAAjB,EAAoCI,QAApC,EAxBgD,CAyBhD;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACD;;AAEDF,IAAAA,OAAO,CAACC,GAAR,CAAYb,KAAZ;AAED;;AAED,QAAMqB,uBAAuB,GAAIlC,GAAD,IAAS;AACvCH,IAAAA,iBAAiB,CAACG,GAAD,CAAjB;AACAL,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAHD;;AAKA,sBACE;AAAA,4BACE;AAAK,MAAA,KAAK,EAAEb,MAAM,CAACC,IAAnB;AAAA,gBAmBGQ,UAAU,IACTA,UAAU,CAAC4C,GAAX,CAAe,CAACnC,GAAD,EAAMoC,KAAN,kBACb,QAAC,IAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,OAAO,EAAE,cACP,QAAC,OAAD;AAAS,UAAA,KAAK,EAAC,uBAAf;AAAA,iCACE,QAAC,kBAAD;AACE,YAAA,OAAO,EAAE,MACPC,MAAM,CAACC,IAAP,CACG,GAAE3D,WAAW,CAACc,OAAD,CAAU,SAAQO,GAAG,CAACI,aAAc,MAAKJ,GAAG,CAACK,QAAS,YADtE,EAEE,QAFF;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADO,eAWP,QAAC,OAAD;AAAS,UAAA,KAAK,EAAC,8BAAf;AAAA,iCACE,QAAC,gBAAD;AAAkB,YAAA,OAAO,EAAE,MAAM6B,uBAAuB,CAAClC,GAAD;AAAxD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAXO,CAFX;AAiBE,QAAA,KAAK,EAAE;AAAEuC,UAAAA,KAAK,EAAE,GAAT;AAAcC,UAAAA,MAAM,EAAE;AAAtB,SAjBT;AAkBE,QAAA,KAAK,eACH,QAAC,KAAD;AACE,UAAA,OAAO,EAAE,KADX;AAEE,UAAA,GAAG,EAAE,CAAAxC,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEyC,KAAL,KAAc,OAFrB;AAGE,UAAA,QAAQ,EAAC,gqGAHX;AAIE,UAAA,GAAG,EAAC,EAJN;AAKE,UAAA,KAAK,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAV;AALT;AAAA;AAAA;AAAA;AAAA,gBAnBJ;AAAA,+BA6BE,QAAC,IAAD;AAAM,UAAA,KAAK,EAAE1C,GAAG,CAACiB,IAAjB;AAAuB,UAAA,WAAW,EAAEjB,GAAG,CAAC2C;AAAxC;AAAA;AAAA;AAAA;AAAA;AA7BF,SA2BOP,KA3BP;AAAA;AAAA;AAAA;AAAA,cADF;AApBJ;AAAA;AAAA;AAAA;AAAA,YADF,eAuDI,QAAC,KAAD;AACE,MAAA,KAAK,EAAG,YAAWxC,cAAZ,aAAYA,cAAZ,uBAAYA,cAAc,CAAEqB,IAAK,KAAIrB,cAArC,aAAqCA,cAArC,uBAAqCA,cAAc,CAAES,QAAS,QADvE;AAEE,MAAA,OAAO,EAAEX,OAFX;AAGE,MAAA,IAAI,EAAE,MAAMK,gBAAgB,CAACH,cAAD,CAH9B;AAIE,MAAA,QAAQ,EAAE,MAAMD,aAAa,CAAC,KAAD,CAJ/B;AAAA,6BAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,YAvDJ;AAAA,kBADF;AAkED;;GApIQJ,U;UAC8BhB,a,EACjBG,c,EAGJZ,iB;;;KALTyB,U;AAsIT,eAAeA,UAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useMoralisWeb3Api } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Input, Alert, Spin, Button } from \"antd\";\nimport { useNFTBalance } from \"hooks/useNFTBalance\";\nimport { FileSearchOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { download } from \"downloadjs\";\nconst { Meta } = Card;\n\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\",\n  },\n};\n\nfunction NFTBalance() {\n  const { NFTBalance, fetchSuccess } = useNFTBalance();\n  const { chainId } = useMoralisDapp();\n  const [visible, setVisibility] = useState(false);\n  const [nftToGrabFiles, setNftToGrabFiles] = useState(null);\n  const Web3Api = useMoralisWeb3Api();\n\n  async function fetchNFTMetadata(nft) {\n    const options = {\n      chain: chainId,\n      address: nft.token_address,\n      token_id: nft.token_id\n    };\n    const metaData = await Web3Api.token.getTokenIdMetadata(options)\n    const metadata = JSON.parse(metaData.metadata);\n    const attributes = metadata.attributes\n    // console.log(metadata)\n\n    let files;\n    \n    for (let i = 0; i < (attributes.length - 1); i++) {\n      let hash = '';\n      let name = '';\n      name = attributes[i].value\n      hash = attributes[i].file\n      let ipfsHash = hash.replace(\"ipfs://\", \"\")\n      const url = `https://ipfs.moralis.io:2053/ipfs/${ipfsHash}`\n\n      function onStartedDownload(id) {\n        console.log(`Started downloading: ${id}`);\n      }\n      \n      function onFailed(error) {\n        console.log(`Download failed: ${error}`);\n      }\n\n      var downloadUrl = url;\n\n      var downloading = download({\n        url : downloadUrl,\n        filename : name,\n        conflictAction : 'uniquify'\n      });\n      \n      downloading.then(onStartedDownload, onFailed);\n      // const response = await fetch(url)\n      // console.log(name)\n      // console.log(response)\n      // files.push(response)\n\n      // async function fetchIPFSFile(hash) {\n      //   const url = hash;\n      //   const response = await fetch(url);\n      //   return await response.json();\n      // }\n    }\n    \n    console.log(files)\n\n  }\n\n  const handleDownloadFileClick = (nft) => {\n    setNftToGrabFiles(nft);\n    setVisibility(true);\n  }\n\n  return (\n    <>\n      <div style={styles.NFTs}>\n        {/* {contractABIJson.noContractDeployed && (\n          <>\n            <Alert\n              message=\"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\"\n              type=\"error\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )}\n        {!fetchSuccess && (\n          <>\n            <Alert\n              message=\"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\"\n              type=\"warning\"\n            />\n            <div style={{ marginBottom: \"10px\" }}></div>\n          </>\n        )} */}\n        {NFTBalance &&\n          NFTBalance.map((nft, index) => (\n            <Card\n              hoverable\n              actions={[\n                <Tooltip title=\"View On Blockexplorer\">\n                  <FileSearchOutlined\n                    onClick={() =>\n                      window.open(\n                        `${getExplorer(chainId)}token/${nft.token_address}?a=${nft.token_id}#inventory`,\n                        \"_blank\"\n                      )\n                    }\n                  />\n                </Tooltip>,\n                <Tooltip title=\"Download Files, if available\">\n                  <DownloadOutlined onClick={() => handleDownloadFileClick(nft)} />\n                </Tooltip>,\n              ]}\n              style={{ width: 240, border: \"2px solid #e7eaf3\" }}\n              cover={\n                <Image\n                  preview={false}\n                  src={nft?.image || \"error\"}\n                  fallback=\"data:image/png;base64,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\"\n                  alt=\"\"\n                  style={{ height: \"240px\" }}\n                />\n              }\n              key={index}\n            >\n              <Meta title={nft.name} description={nft.contract_type}/>\n            </Card>\n          ))}\n      </div>\n        <Modal\n          title={`Download ${nftToGrabFiles?.name} #${nftToGrabFiles?.token_id} Files`}\n          visible={visible}\n          onOk={() => fetchNFTMetadata(nftToGrabFiles)}\n          onCancel={() => setVisibility(false)}\n        >\n          <p>Click OK to download the 3d printer files!</p>\n        </Modal>\n    </>\n  );\n}\n\nexport default NFTBalance;\n"]},"metadata":{},"sourceType":"module"}